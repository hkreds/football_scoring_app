<h3 class="px-2 ml-3" style="width:fit-content;background-color:#e4e4e4;">
  <%= @match.convention.name %><br>
  <%= @match.home_team.name %> vs <%= @match.away_team.name %><strong> 採点登録</strong>
</h3>
<%= @match.start_time.strftime('%Y/%m/%d %H:%M') %>開始
<h5 class="text-center">
  <% if @match.home_goal == nil || @match.away_goal == nil %>
    試合前
  <% else %>
    試合結果：<%= @match.home_goal %> - <%= @match.away_goal %>
  <% end %>
</h5>
<h4 class="px-2 mb-1 ml-3" style="width:fit-content;background-color:#e4e4e4;">出場選手一覧</h3>
<%= form_with model: @scoring do |f| %>
  <div class="row">
    <div>
      <table class="table table-hover">
        <thead>
          <tr>
            <th colspan="4" class="text-center"><%= @match.home_team.name %></th>
          </tr>
        </thead>
        <thead>
          <tr>
            <th>ポジション</th>
            <th>背番号</th>
            <th>選手名</th>
          </tr>
        </thead>
        <tbody>
          <% @competitors.each do |competitor| %>
            <% if competitor.team_id == @match.home_team_id %>
              <% new_scoring = competitor.player_scorings.build %>
              <%= f.fields_for :player_scorings, new_scoring do |player_scoring_form| %>
                <tr>
                  <td class="text-center"><%= competitor.position %></td>
                  <td class="text-center"><%= competitor.uniform_number %></td>
                  <td><%= competitor.player.name %></td>
                  <td><%= player_scoring_form.text_field :score %></td>
                </tr>
                <tr>
                  <td colspan="4">
                    <%= player_scoring_form.text_field :review %>
                    <%= player_scoring_form.hidden_field :competitor_id, :value => competitor.id %>
                  </td>
                </tr>
              <% end %>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="ml-3">
      <table class="table table-hover">
        <thead>
          <tr>
            <th colspan="4" class="text-center"><%= @match.away_team.name %></th>
          </tr>
        </thead>
        <thead>
          <tr>
            <th>ポジション</th>
            <th>背番号</th>
            <th>選手名</th>
          </tr>
        </thead>
        <tbody>
          <% @competitors.each do |competitor| %>
            <% if competitor.team_id == @match.away_team_id %>
              <tr>
                <td class="text-center"><%= competitor.position %></td>
                <td class="text-center"><%= competitor.uniform_number %></td>
                <td><%= competitor.player.name %></td>
              </tr>
              <tr>
                <td colspan="4">
                  <%#= i.text_field :review %>
                  <%#= i.hidden_field :match_id, :value => @match.id %>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <%= f.hidden_field :customer_id, :value => current_customer.id %>
  <%= f.hidden_field :match_id, :value => @match.id %>
  <%= f.submit "登録する", class: "btn btn-primary" %>
<% end %>